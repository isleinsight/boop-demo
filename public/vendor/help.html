<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Help & Tips – Vendor | Payulot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink:#1a2b4a; --muted:#6b7280; --stroke:#e6ebf1; --bg:#f5f7fa; --panel:#ffffff;
      --blue:#2f80ed; --blue-dark:#1a5fcc; --nav:#0b1220; --success:#16a34a; --warn:#f59e0b;
    }
    *{ box-sizing:border-box }
    body{ margin:0; font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); color:var(--ink); }

    /* Tiny header (matches vendor Home) */
    .minihead{ background:var(--nav); color:#fff; }
    .minihead-inner{ max-width:1100px; margin:0 auto; padding:10px 18px; display:flex; align-items:center; justify-content:space-between; }
    .minihead img{ height:30px; display:block; }
    .logout{ color:#fff; text-decoration:none; font-size:.95rem; padding:6px 8px; border-radius:6px; background:rgba(255,255,255,.08); }
    .logout:hover{ background:rgba(255,255,255,.15); }

    /* Hero */
    .hero{ background:linear-gradient(180deg,#f7fafc,#fff); border-bottom:1px solid var(--stroke); }
    .hero-inner{ max-width:1100px; margin:0 auto; padding:22px 18px 18px; }
    .hero h1{ margin:0 0 6px; font-size:clamp(20px,3vw,28px); font-weight:600; }
    .hero-sub{ margin:0; color:#4b5563; }

    /* Quick links tiles */
    .tiles{
      max-width:1100px; margin:12px auto 20px; padding:0 18px;
      display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:14px;
    }
    .tile{
      display:flex; gap:12px; align-items:center; padding:14px;
      border:1px solid var(--stroke); background:#fff; border-radius:12px; text-decoration:none; color:var(--ink);
      box-shadow:0 6px 16px rgba(0,0,0,.06); transition:transform .15s ease, border-color .15s ease;
    }
    .tile:hover{ border-color:#d7deea; transform:translateY(-1px); }
    .tile .icon{ width:28px; height:28px; flex:0 0 28px; }
    .tile .title{ font-weight:600; font-size:.98rem; }
    .tile .sub{ color:var(--muted); font-size:.9rem; }

    /* Main help area */
    .container{ max-width:1100px; margin:0 auto 40px; padding:0 18px; display:grid; grid-template-columns: 3fr 2fr; gap:16px; }
    @media (max-width: 900px){ .container{ grid-template-columns:1fr; } }

    .card{ background:var(--panel); border:1px solid var(--stroke); border-radius:12px; padding:16px; }
    .card h2{ margin:0 0 10px; font-size:1.06rem; }

    /* Search */
    .searchwrap{ display:flex; gap:8px; margin:10px 0 14px; }
    .searchwrap input{
      width:100%; padding:12px; border-radius:10px; border:1px solid var(--stroke);
      background:#fff; color:#111827; font-size:1rem;
    }
    .clearbtn{
      padding:10px 12px; border:1px solid var(--stroke); border-radius:10px; background:#fff; cursor:pointer; font-weight:600;
    }

    /* Accordion FAQ */
    .faq{ margin:0; padding:0; list-style:none; display:grid; gap:10px; }
    details{
      background:#fff; border:1px solid var(--stroke); border-radius:10px; padding:12px 14px;
    }
    summary{
      cursor:pointer; font-weight:600; outline:none;
      display:flex; align-items:center; justify-content:space-between;
    }
    summary::-webkit-details-marker{ display:none; }
    .caret{ transition: transform .18s ease; }
    details[open] .caret{ transform: rotate(90deg); }
    .faq p{ margin:10px 0 0; color:#4b5563; line-height:1.5; }
    .faq code{ background:#f3f4f6; padding:2px 6px; border-radius:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }

    /* Side cards */
    .list{ display:grid; gap:10px; }
    .item{ background:#fff; border:1px solid var(--stroke); border-radius:10px; padding:12px 14px; }
    .item h3{ margin:0 0 6px; font-size:1rem; }
    .item p{ margin:0; color:#4b5563; }

    .contact{
      border:1px dashed var(--stroke); border-radius:12px; padding:14px; background:#f8fafc; margin-top:10px;
    }
    .contact a{ color:var(--blue); text-decoration:none; font-weight:600; }
    .contact a:hover{ text-decoration:underline; }

    /* Footer */
    footer{ border-top:1px solid var(--stroke); background:#fff; }
    .footer-inner{ max-width:1100px; margin:0 auto; padding:16px 18px; display:flex; gap:14px; align-items:center; justify-content:space-between; color:#6b7280; font-size:.9rem; }
    .footer-links a{ color:#6b7280; text-decoration:none; margin-left:12px; }
    .footer-links a:hover{ text-decoration:underline; }
  </style>
</head>
<body>
  <!-- Auth (vendors only) -->
  <script>
    (async () => {
      try {
        const token = localStorage.getItem("payulot_jwt");
        if (!token) throw new Error("No token");
        const r = await fetch("/api/me", { headers:{ Authorization:`Bearer ${token}` }});
        if (!r.ok) throw new Error("Unauthorized");
        const me = await r.json();
        if ((me.role||"").toLowerCase() !== "vendor") throw new Error("Not a vendor");
        localStorage.setItem("payulotUser", JSON.stringify(me));
      } catch {
        localStorage.clear(); location.href = "vendor-login.html";
      }
    })();
  </script>

  <!-- Minimal header -->
  <header class="minihead">
    <div class="minihead-inner">
      <img src="../assets/logo-white.png" alt="Payulot Logo" />
      <a href="#" id="logoutLink" class="logout">Log Out</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-inner">
      <h1>Help & Tips</h1>
      <p class="hero-sub">Answers for vendors, plus quick links to do common tasks.</p>
    </div>
  </section>

  <!-- Quick links -->
  <section class="tiles">
    <a class="tile" href="transfer.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M17 6H7m10 4l-4-4m4 4l-4 4M7 18h10m-10-4l4 4m-4-4l4-4" stroke="#1f2937" stroke-width="2" stroke-linecap="round"/></svg>
      <span><span class="title">Transfer to Bank</span><br/><span class="sub">Create a payout request</span></span>
    </a>
    <a class="tile" href="transactions.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M3 6h18M3 12h12M3 18h9" stroke="#1f2937" stroke-width="2" stroke-linecap="round"/></svg>
      <span><span class="title">Transactions</span><br/><span class="sub">Search, filter, and export CSV</span></span>
    </a>
    <a class="tile" href="index.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M3 12l2-2m0 0l7-7 7 7m-9 2v6m-4 4h10m-6-10h6" stroke="#1f2937" stroke-width="2" stroke-linecap="round"/></svg>
      <span><span class="title">Vendor Home</span><br/><span class="sub">Overview & quick actions</span></span>
    </a>
  </section>

  <!-- Main content -->
  <main class="container">
    <!-- Left: FAQs -->
    <section class="card">
      <h2>FAQs</h2>
      <div class="searchwrap">
        <input id="faqSearch" type="search" placeholder="Search help (e.g. bank, payout, CSV, error 403)…" />
        <button id="clearSearch" class="clearbtn" type="button">Clear</button>
      </div>

      <ul class="faq" id="faqList">
        <li>
          <details open>
            <summary>
              How do I add my bank account in Bermuda?
              <span class="caret">›</span>
            </summary>
            <p>
              Go to <a href="transfer.html">Transfer to Bank</a> → click <b>Add bank</b>. Choose your bank (Butterfield, HSBC Bermuda, or Clarien),
              enter the <b>account holder name</b> and the <b>account number</b>. No routing numbers are required in Bermuda.
              After saving, your bank appears in the “Destination account” dropdown.
            </p>
          </details>
        </li>

        <li>
          <details>
            <summary>
              How do I request a payout to my bank?
              <span class="caret">›</span>
            </summary>
            <p>
              On <a href="transfer.html">Transfer to Bank</a>, select your saved bank, enter the amount in BMD, optionally add a memo,
              click <b>Review request</b>, then <b>Submit request</b>. Your request is sent to Accounts for review.
              You’ll see the latest request on the right side of the page and your recent payouts below it.
            </p>
          </details>
        </li>

        <li>
          <details>
            <summary>
              Why doesn’t my payout reduce my balance immediately?
              <span class="caret">›</span>
            </summary>
            <p>
              Payouts are processed by Accounts. Your <b>available balance updates when the payout completes</b>.
              Until then, you’ll see the request as <em>submitted</em> or <em>pending</em> in Recent payouts.
            </p>
          </details>
        </li>

        <li>
          <details>
            <summary>
              How do I find and export my transactions?
              <span class="caret">›</span>
            </summary>
            <p>
              Open <a href="transactions.html">Transactions</a>. Use the quick range buttons (7/30/90 days) or choose a custom date range, then click <b>Export CSV</b>.
              The CSV includes date, direction, counterparty, amount, note, and transaction ID.
            </p>
          </details>
        </li>

        <li>
          <details>
            <summary>
              I see “403 Forbidden” or “404 Not Found.” What do I do?
              <span class="caret">›</span>
            </summary>
            <p>
              Make sure you’re signed in as a vendor in this browser tab. If you recently changed roles or accounts, click <b>Log Out</b> and sign in again.
              If an endpoint shows 404, confirm you’re visiting pages under <code>/vendor/</code> (e.g., <code>/vendor/transfer.html</code>).
            </p>
          </details>
        </li>

        <li>
          <details>
            <summary>
              Can I take Payulot payments with “Passport Pay”?
              <span class="caret">›</span>
            </summary>
            <p>
              Yes—your POS can open the Passport Pay URL in a new tab for each customer. The customer’s passport ID comes from their card/phone/bracelet NFC.
              You enter the total and confirm the charge. (For security, we don’t type passport IDs manually on the vendor side.)
            </p>
          </details>
        </li>

        <li>
          <details>
            <summary>
              Who do I contact for support?
              <span class="caret">›</span>
            </summary>
            <p>
              Email our team at <a href="mailto:support@payulot.com">support@payulot.com</a>.
              Include your business name, the email on your account, and any error messages/screenshots so we can help quickly.
            </p>
          </details>
        </li>
      </ul>
    </section>

    <!-- Right: Troubleshooting & tips -->
    <aside class="card">
      <h2>Quick troubleshooting</h2>
      <div class="list">
        <div class="item">
          <h3>Balance not loading</h3>
          <p>Reload the page. If it persists, log out and back in. Check <code>/api/wallets/mine</code> is reachable (network/ad-blockers can interfere).</p>
        </div>
        <div class="item">
          <h3>Can’t add a bank</h3>
          <p>Ensure name & account number are correct and all fields are filled.</p>
        </div>
        <div class="item">
          <h3>CSV looks empty</h3>
          <p>Widen your date range on the Transactions page or clear filters, then export again.</p>
        </div>
      </div>

      <div class="contact">
        <div style="font-weight:700; margin-bottom:6px;">Still stuck?</div>
        <div>Message us: <a href="mailto:support@payulot.com">support@payulot.com</a></div>
        <div style="margin-top:6px;">Please include: business name, vendor email, steps tried, and any error text.</div>
      </div>
    </aside>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footer-inner">
      <div>© 2025 Payulot</div>
      <div class="footer-links">
        <a href="/terms.html" target="_blank" rel="noopener">Terms</a>
        <a href="/privacy.html" target="_blank" rel="noopener">Privacy</a>
      </div>
    </div>
  </footer>

  <!-- Page logic -->
  <script>
  (async () => {
    // Try to ensure vendor long-session if the helper is loaded
    if (typeof window.ensureLongVendorSession === "function") {
      try { await window.ensureLongVendorSession(); } catch {}
    }
  })();

  // Logout
  document.getElementById('logoutLink')?.addEventListener('click', async (e)=>{
    e.preventDefault();
    try { await fetch('/api/logout', { method:'POST' }); } catch {}
    localStorage.clear();
    location.href = '../login.html';
  });

  // Simple FAQ search/filter
  (function(){
    const input = document.getElementById('faqSearch');
    const clear = document.getElementById('clearSearch');
    const items = Array.from(document.querySelectorAll('#faqList > li'));

    function normalize(s){ return (s||'').toLowerCase(); }

    function filter(){
      const q = normalize(input.value);
      items.forEach(li => {
        const text = normalize(li.innerText);
        const hit = !q || text.includes(q);
        li.style.display = hit ? '' : 'none';
        if (!hit) {
          const det = li.querySelector('details');
          if (det) det.open = false;
        }
      });
    }

    input.addEventListener('input', filter);
    clear.addEventListener('click', () => {
      input.value = '';
      filter();
      input.focus();
    });

    filter();
  })();
</script>
  <script src="vendor-common.js"></script>
</body>
</html>
